{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, resolveDirective as _resolveDirective, withDirectives as _withDirectives, toDisplayString as _toDisplayString, vShow as _vShow, withModifiers as _withModifiers, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"name\"\n}, \"Nome:\", -1 /* HOISTED */);\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"email\"\n}, \"Email:\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"phone\"\n}, \"Telefone:\", -1 /* HOISTED */);\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"address\"\n}, \"Endereço:\", -1 /* HOISTED */);\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"photo\"\n}, \"Foto (URL ou Upload):\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\"\n}, \"Salvar\", -1 /* HOISTED */);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_b_modal = _resolveComponent(\"b-modal\");\n  const _directive_validate = _resolveDirective(\"validate\");\n  return _openBlock(), _createBlock(_component_b_modal, {\n    modelValue: $data.showModal,\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.showModal = $event),\n    title: \"Editar Contato\",\n    onHidden: $options.resetData\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"form\", {\n      onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.submitForm && $options.submitForm(...args), [\"prevent\"]))\n    }, [_createElementVNode(\"div\", null, [_hoisted_1, _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      id: \"name\",\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.editedContact.name = $event),\n      class: _normalizeClass({\n        'is-invalid': _ctx.errors.has('name')\n      })\n    }, null, 2 /* CLASS */), [[_vModelText, $data.editedContact.name], [_directive_validate, 'required|max:255']]), _withDirectives(_createElementVNode(\"span\", {\n      class: \"invalid-feedback\"\n    }, _toDisplayString(_ctx.errors.first('name')), 513 /* TEXT, NEED_PATCH */), [[_vShow, _ctx.errors.has('name')]])]), _createElementVNode(\"div\", null, [_hoisted_2, _withDirectives(_createElementVNode(\"input\", {\n      type: \"email\",\n      id: \"email\",\n      \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.editedContact.email = $event),\n      class: _normalizeClass({\n        'is-invalid': _ctx.errors.has('email')\n      })\n    }, null, 2 /* CLASS */), [[_vModelText, $data.editedContact.email], [_directive_validate, 'required|email']]), _withDirectives(_createElementVNode(\"span\", {\n      class: \"invalid-feedback\"\n    }, _toDisplayString(_ctx.errors.first('email')), 513 /* TEXT, NEED_PATCH */), [[_vShow, _ctx.errors.has('email')]])]), _createElementVNode(\"div\", null, [_hoisted_3, _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      id: \"phone\",\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.editedContact.phone = $event),\n      class: _normalizeClass({\n        'is-invalid': _ctx.errors.has('phone')\n      })\n    }, null, 2 /* CLASS */), [[_vModelText, $data.editedContact.phone], [_directive_validate, 'required|max:20']]), _withDirectives(_createElementVNode(\"span\", {\n      class: \"invalid-feedback\"\n    }, _toDisplayString(_ctx.errors.first('phone')), 513 /* TEXT, NEED_PATCH */), [[_vShow, _ctx.errors.has('phone')]])]), _createElementVNode(\"div\", null, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      id: \"address\",\n      \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.editedContact.address = $event),\n      class: _normalizeClass({\n        'is-invalid': _ctx.errors.has('address')\n      })\n    }, null, 2 /* CLASS */), [[_vModelText, $data.editedContact.address], [_directive_validate, 'required|max:255']]), _withDirectives(_createElementVNode(\"span\", {\n      class: \"invalid-feedback\"\n    }, _toDisplayString(_ctx.errors.first('address')), 513 /* TEXT, NEED_PATCH */), [[_vShow, _ctx.errors.has('address')]])]), _createElementVNode(\"div\", null, [_hoisted_5, _createElementVNode(\"input\", {\n      type: \"file\",\n      id: \"photo\",\n      ref: \"photo\",\n      onChange: _cache[4] || (_cache[4] = (...args) => $options.handleFileUpload && $options.handleFileUpload(...args)),\n      accept: \"image/*\"\n    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.editedContact.photo = $event),\n      placeholder: \"URL da foto (opcional)\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.editedContact.photo]])]), _hoisted_6], 32 /* NEED_HYDRATION */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"onHidden\"]);\n}","map":{"version":3,"names":["_createElementVNode","for","type","_createBlock","_component_b_modal","modelValue","$data","showModal","_cache","$event","title","onHidden","$options","resetData","default","_withCtx","onSubmit","_withModifiers","args","submitForm","_hoisted_1","id","editedContact","name","class","_normalizeClass","_ctx","errors","has","_toDisplayString","first","_hoisted_2","email","_hoisted_3","phone","_hoisted_4","address","_hoisted_5","ref","onChange","handleFileUpload","accept","photo","placeholder","_hoisted_6","_"],"sources":["/home/natalia/teste_huggy_/huggy/src/components/EditContactModal.vue"],"sourcesContent":["<template>\n  <b-modal v-model=\"showModal\" title=\"Editar Contato\" @hidden=\"resetData\">\n    <form @submit.prevent=\"submitForm\">\n      <div>\n        <label for=\"name\">Nome:</label>\n        <input type=\"text\" id=\"name\" v-model=\"editedContact.name\" v-validate=\"'required|max:255'\" :class=\"{ 'is-invalid': errors.has('name') }\">\n        <span v-show=\"errors.has('name')\" class=\"invalid-feedback\">{{ errors.first('name') }}</span>\n      </div>\n      <div>\n        <label for=\"email\">Email:</label>\n        <input type=\"email\" id=\"email\" v-model=\"editedContact.email\" v-validate=\"'required|email'\" :class=\"{ 'is-invalid': errors.has('email') }\">\n        <span v-show=\"errors.has('email')\" class=\"invalid-feedback\">{{ errors.first('email') }}</span>\n      </div>\n      <div>\n        <label for=\"phone\">Telefone:</label>\n        <input type=\"text\" id=\"phone\" v-model=\"editedContact.phone\" v-validate=\"'required|max:20'\" :class=\"{ 'is-invalid': errors.has('phone') }\">\n        <span v-show=\"errors.has('phone')\" class=\"invalid-feedback\">{{ errors.first('phone') }}</span>\n      </div>\n      <div>\n        <label for=\"address\">Endereço:</label>\n        <input type=\"text\" id=\"address\" v-model=\"editedContact.address\" v-validate=\"'required|max:255'\" :class=\"{ 'is-invalid': errors.has('address') }\">\n        <span v-show=\"errors.has('address')\" class=\"invalid-feedback\">{{ errors.first('address') }}</span>\n      </div>\n      <div>\n        <label for=\"photo\">Foto (URL ou Upload):</label>\n        <input type=\"file\" id=\"photo\" ref=\"photo\" @change=\"handleFileUpload\" accept=\"image/*\">\n        <input type=\"text\" v-model=\"editedContact.photo\" placeholder=\"URL da foto (opcional)\">\n      </div>\n      <button type=\"submit\">Salvar</button>\n    </form>\n  </b-modal>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { ValidationProvider, ValidationObserver } from 'vee-validate';\n\nexport default {\n  name: 'EditContactModal',\n  props: {\n    contact: {\n      type: Object,\n      required: true\n    }\n  },\n  components: {\n    ValidationProvider,\n    ValidationObserver,\n  },\n  data() {\n    return {\n      showModal: false,\n      editedContact: { ...this.contact },\n      errorMessage: ''\n    };\n  },\n  methods: {\n    resetData() {\n      this.editedContact = { ...this.contact };\n      if (this.$refs.photo) {\n        this.$refs.photo.value = '';  // Limpa o campo de arquivo após o reset\n      }\n      this.errorMessage = '';\n    },\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.editedContact.photo = file;\n      }\n    },\n    submitForm() {\n      console.log('Formulário submetido!');\n      this.errorMessage = '';\n\n      this.$validator.validateAll().then((result) => {\n        if (result) {\n          // Cria o objeto FormData para enviar os dados\n          const formData = new FormData();\n          formData.append('name', this.editedContact.name.trim());\n          formData.append('email', this.editedContact.email.trim());\n          formData.append('phone', this.editedContact.phone.trim());\n          formData.append('address', this.editedContact.address.trim());\n\n          // Adiciona a foto se um arquivo foi carregado\n          if (this.editedContact.photo instanceof File) {\n            formData.append('photo', this.editedContact.photo);\n          }\n\n          // Log para verificar os dados antes de enviar\n          for (let pair of formData.entries()) {\n            console.log(pair[0] + ': ' + pair[1]);\n          }\n\n          // Envia a requisição para atualizar o contato no backend\n          axios.patch(`http://localhost:8000/api/clientes/${this.contact.id}`, formData, {\n            headers: {\n              'Content-Type': 'multipart/form-data'\n            }\n          })\n          .then(response => {\n            console.log('Contato editado com sucesso:', response.data);\n            this.showModal = false;\n            this.$emit('update', response.data);\n            this.resetData();\n          })\n          .catch(error => {\n            this.errorMessage = 'Erro ao editar contato.';\n            console.error('Erro ao editar contato:', error);\n          });\n        } else {\n          this.errorMessage = 'Por favor, corrija os erros no formulário.';\n        }\n      });\n    }\n  }\n};\n</script>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}